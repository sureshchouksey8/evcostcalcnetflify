<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EV Cost Advisor ‚Äî India (AI-ready)</title>
<meta name="build" content="split-files-ux-compare-ai-guards-v1" />
<link rel="preload" href="assets/app.css" as="style">
<link rel="stylesheet" href="assets/app.css" />
</head>
<body>
  <header class="site-head">
    <div class="container row wrap">
      <div>
        <h1>EV Cost Advisor ‚Äî India</h1>
        <div class="subtitle">Compare <b>per-day</b> EV vs petrol running costs. Select a model to begin.</div>
      </div>
      <div class="pills"><div class="pill">üáÆüá≥ India</div><div class="pill">‚ö° EV</div><div class="pill">‚Çπ/day first</div></div>
    </div>
  </header>

  <main class="container">
    <div class="tabs">
      <button id="tab-cars" class="active">Cars</button>
      <button id="tab-scooters">Scooters</button>
    </div>

    <div class="tip">üí° Tip: Pick a model ‚Üí set km/day ‚Üí compare EV vs Petrol. Share a WhatsApp-ready image from the calculator.</div>

    <div class="search">
      <input id="q" placeholder="Search brand, model, segment..." />
      <div id="resultCount" class="small mt8 muted"></div>
    </div>

    <div id="grid" class="grid"></div>
  </main>

  <!-- Calculator (mobile = bottom-sheet, desktop = centered modal) -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div id="sheet" class="modal" role="dialog" aria-modal="true" aria-label="Calculator">
      <div class="modal-head">
        <div class="row gap">
          <div class="row gap">
            <button id="infoBtn" class="badge-btn" title="How this is calculated">i Info</button>
            <button id="emiBtn" class="button">EMI</button>
            <button id="aiBtn" class="button" title="AI suggestion">‚ú® AI Analysis</button>
            <button id="compareBtn" class="button">Compare</button>
          </div>
          <div class="row gap">
            <select id="switcher" class="input" title="Switch model"></select>
            <div class="nav-arrows">
              <button id="prevModel" class="icon-btn" title="Previous">‚Äπ</button>
              <button id="nextModel" class="icon-btn" title="Next">‚Ä∫</button>
            </div>
          </div>
        </div>
        <button id="closeBtn" class="button close">Close ‚úï</button>
      </div>
      <div class="modal-body">
        <div class="grid3">
          <!-- Left controls -->
          <div>
            <label class="small muted">City preset</label>
            <select id="citySel" class="mt8 input"></select>
            <div class="small mt8">Tariff: <span id="tariffView" class="tabnums">‚Äî</span> /kWh</div>

            <div class="mt16">
              <div class="row left gap">
                <label class="small muted">Daily drive (km)</label>
                <span class="badge">Kitna Chalaoge?</span>
              </div>
              <input id="kmRange" type="range" min="0" max="200" step="1" value="20" class="mt8" />
              <div class="small muted mt8"><span id="kmVal" class="tabnums">20</span> km/day</div>
            </div>

            <div class="mt16">
              <label class="small muted">Petrol price (‚Çπ/L)</label>
              <input id="petrolIn" type="number" class="input mt8" value="100" />
            </div>

            <div class="mt20" id="daysBlockCenter">
              <div class="row left gap">
                <label class="small muted">Days per month</label>
                <div class="badge tabnums" id="daysBadge">26 days</div>
              </div>
              <input id="daysRange" type="range" min="1" max="31" step="1" value="26" class="mt8" />
            </div>
          </div>

          <!-- Center: tiles + stats -->
          <div>
            <div class="row left gap"><span class="badge">Kitna Kharchoge?</span></div>
            <div class="tile ev mt8">
              <div class="small uc">Cost per day (EV)</div>
              <div id="perDayEv" class="big tabnums">‚Äî</div>
              <div class="small" id="kmNoteEv">For 20 km/day</div>
            </div>
            <div class="tile ice mt16">
              <div class="small uc">Cost per day (Petrol)</div>
              <div id="perDayIce" class="big tabnums">‚Äî</div>
              <div class="small" id="kmNoteIce">For 20 km/day</div>
            </div>

            <div class="row mt24">
              <div id="statMonthly" class="stat clickable" style="flex:1">
                <div class="row small muted"><span>Monthly running cost</span><span id="monthlyPair" class="tabnums">‚Äî</span></div>
                <div class="bar mt12"><div id="barEvM" class="fill evBar"></div></div>
                <div class="bar mt8"><div id="barIceM" class="fill iceBar"></div></div>
              </div>
              <div id="statYearly" class="stat clickable" style="flex:1">
                <div class="row small muted"><span>Yearly running cost</span><span id="yearlyPair" class="tabnums">‚Äî</span></div>
                <div class="bar mt12"><div id="barEvY" class="fill evBar"></div></div>
                <div class="bar mt8"><div id="barIceY" class="fill iceBar"></div></div>
              </div>
            </div>
          </div>

          <!-- Right: (optional) photo + savings circle + model info + AI panel -->
          <div class="right-rail">
            <img id="modelPhoto" alt="">
            <svg class="gauge" viewBox="0 0 120 120">
              <circle cx="60" cy="60" r="50" fill="none" stroke="#cbd5e1" stroke-width="12" stroke-opacity=".6"/>
              <g transform="rotate(-90 60 60)">
                <circle id="gProg" cx="60" cy="60" r="50" fill="none" stroke="#16a34a" stroke-width="12" stroke-linecap="round" stroke-dasharray="0 314"/>
              </g>
              <text id="gLabel" x="60" y="56" text-anchor="middle" class="gauge-title">‚Äî</text>
              <text id="gSub" x="60" y="80" text-anchor="middle" class="gauge-sub">Savings vs petrol</text>
            </svg>
            <div class="stat center">
              <div id="modelName" class="model-title">‚Äî</div>
              <div id="modelInfo" class="small muted mt8">‚Äî</div>
              <div class="small muted mt8">Monthly savings</div>
              <div id="saveMonth" class="bold tabnums mt4" style="font-size:22px">‚Äî</div>
              <div id="goodFit" class="good mt8">üëç Good fit</div>
            </div>

            <div id="aiPanel" class="ai-panel mt8">
              <div id="aiVerdict" class="bold">AI analysis</div>
              <div id="aiReasons" class="small mt8"></div>
              <div id="aiAlt" class="small mt8"></div>
              <label class="small mt8 inline"><input id="aiAddShare" type="checkbox" /> Add AI line to share card</label>
            </div>

            <div class="row gap">
              <button id="shareBtn" class="button">Share</button>
              <button id="openShare" class="button primary">Share this scenario</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Compare carousel modal -->
  <div id="compareOverlay" class="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Compare">
      <div class="modal-head">
        <div class="muted small">Compare peers</div>
        <div class="row gap">
          <button id="cmpPrev" class="icon-btn">‚Äπ</button>
          <button id="cmpNext" class="icon-btn">‚Ä∫</button>
          <button id="cmpClose" class="button close">Close ‚úï</button>
        </div>
      </div>
      <div class="modal-body">
        <div id="cmpTrack" class="cmp-track"></div>
      </div>
    </div>
  </div>

  <!-- Share modal -->
  <div id="shareOverlay" class="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Share card">
      <div class="modal-head">
        <div class="muted small" id="shareTitle">Share ‚Äî Mobile portrait (1080√ó1920)</div>
        <div class="row gap">
          <button id="dlPng" class="button primary">Download PNG</button>
          <button id="openNew" class="button">Open in new tab</button>
          <button id="copyB64" class="button">Copy Base64</button>
          <button id="shareClose" class="button close">Close ‚úï</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="stat" style="margin:auto;max-width:720px">
          <canvas id="shareCanvas" width="1080" height="1920" class="ring" style="border-radius:12px;max-width:100%;display:block;margin:0 auto"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Info modal -->
  <div id="infoOverlay" class="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Info">
      <div class="modal-head">
        <div class="muted small" id="infoTitle">Info</div>
        <button id="infoClose" class="button close">Close ‚úï</button>
      </div>
      <div class="modal-body">
        <div id="infoContent" class="stat" style="max-width:820px;margin:auto;font-size:16px"></div>
      </div>
    </div>
  </div>

  <script src="assets/data.js" defer></script>
  <script src="assets/app.js" defer></script>
</body>
</html>

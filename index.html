<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EV Cost Advisor ‚Äî India</title>
<link rel="stylesheet" href="assets/app.css" />
</head>
<body>
  <div class="container">
    <header class="row">
      <div>
        <h1>EV Cost Advisor ‚Äî India</h1>
        <div class="subtitle">Compare <b>per-day</b> EV vs petrol costs. Pick a model to begin.</div>
      </div>
      <div class="pills">
        <div class="pill">üáÆüá≥ India</div><div class="pill">‚ö° EV</div><div class="pill">‚Çπ/day first</div>
      </div>
    </header>

    <div class="tabs">
      <button id="tab-cars" class="active">Cars</button>
      <button id="tab-scooters">Scooters</button>
    </div>

    <div class="tip">üí° Tip: Pick a model ‚Üí set km/day ‚Üí compare EV vs Petrol. Share a WhatsApp-ready image.</div>

    <div class="search">
      <input id="q" placeholder="Search brand, model, segment..." />
      <div id="resultCount" class="small mt8 muted"></div>
    </div>

    <div id="grid" class="grid"></div>
  </div>

  <!-- Calculator (mobile = bottom sheet, desktop = centered modal) -->
  <div id="overlay" class="overlay" aria-hidden="true">
    <div class="modal calc-modal" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div class="row" style="gap:10px">
          <button id="infoBtn" class="badge-btn" title="How this is calculated">i Info</button>
          <button id="emiBtn" class="button">EMI</button>
          <button id="aiBtn" class="button" title="AI suggestion">‚ú® AI Analysis</button>
          <button id="compareBtn" class="button">Compare</button>
        </div>
        <div class="row">
          <button id="shareBtn" class="button">Share</button>
          <button id="closeBtn" class="button big-x" aria-label="Close">‚úï</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="grid3">
          <!-- Left -->
          <div>
            <label class="small muted">City preset</label>
            <select id="citySel" class="mt8 input"></select>
            <div class="small mt8">Tariff: <span id="tariffView" class="tabnums">‚Äî</span> /kWh</div>

            <div class="mt16">
              <div class="row" style="justify-content:flex-start;gap:10px">
                <label class="small muted">Daily drive (km)</label>
                <span class="badge">Kitna Chalaoge?</span>
              </div>
              <input id="kmRange" type="range" min="0" max="200" step="1" value="20" class="mt8" />
              <div class="small muted mt8"><span id="kmVal" class="tabnums">20</span> km/day</div>
            </div>

            <div class="mt16">
              <label class="small muted">Petrol price (‚Çπ/L)</label>
              <input id="petrolIn" type="number" class="input mt8" value="100" />
            </div>

            <!-- Model switcher -->
            <div class="mt16">
              <label class="small muted">Switch model</label>
              <div class="row mt8" style="gap:8px">
                <button id="prevModel" class="badge-btn">‚óÄ Prev</button>
                <select id="modelSwitcher" class="input"></select>
                <button id="nextModel" class="badge-btn">Next ‚ñ∂</button>
              </div>
            </div>
          </div>

          <!-- Center -->
          <div>
            <div class="row" style="justify-content:flex-start;gap:10px"><span class="badge">Kitna Kharchoge?</span></div>
            <div class="tile ev mt8">
              <div class="small up">Cost per day (EV)</div>
              <div id="perDayEv" class="big tabnums">‚Äî</div>
              <div class="small" id="kmNoteEv">For 20 km/day</div>
            </div>
            <div class="tile ice mt16">
              <div class="small up">Cost per day (Petrol)</div>
              <div id="perDayIce" class="big tabnums">‚Äî</div>
              <div class="small" id="kmNoteIce">For 20 km/day</div>
            </div>

            <!-- Days slider placed here (better spacing) -->
            <div class="mt20" id="daysBlockCenter">
              <div class="row" style="gap:10px;align-items:center">
                <label class="small muted">Days per month</label>
                <div class="badge tabnums" id="daysBadge">26 days</div>
              </div>
              <input id="daysRange" type="range" min="1" max="31" step="1" value="26" class="mt8" />
            </div>

            <div class="row mt24">
              <div id="statMonthly" class="stat clickable" style="flex:1">
                <div class="row small muted"><span>Monthly running cost</span><span id="monthlyPair" class="tabnums">‚Äî</span></div>
                <div class="bar mt12"><div id="barEvM" class="fill" style="width:0%"></div></div>
                <div class="bar mt8"><div id="barIceM" class="fill icebar" style="width:0%"></div></div>
              </div>
              <div id="statYearly" class="stat clickable" style="flex:1">
                <div class="row small muted"><span>Yearly running cost</span><span id="yearlyPair" class="tabnums">‚Äî</span></div>
                <div class="bar mt12"><div id="barEvY" class="fill" style="width:0%"></div></div>
                <div class="bar mt8"><div id="barIceY" class="fill icebar" style="width:0%"></div></div>
              </div>
            </div>
          </div>

          <!-- Right -->
          <div class="right-rail">
            <img id="modelPhoto" alt="" />
            <svg class="gauge" viewBox="0 0 120 120" aria-hidden="true">
              <circle cx="60" cy="60" r="50" fill="none" stroke="#cbd5e1" stroke-width="12" stroke-opacity=".6"/>
              <g transform="rotate(-90 60 60)">
                <circle id="gProg" cx="60" cy="60" r="50" fill="none" stroke="#16a34a" stroke-width="12" stroke-linecap="round" stroke-dasharray="0 314"/>
              </g>
              <text id="gLabel" x="60" y="56" text-anchor="middle" fill="#0f172a" font-size="22" font-weight="800">‚Äî</text>
              <text id="gSub" x="60" y="80" text-anchor="middle" fill="#475569" font-size="12">Savings vs petrol</text>
            </svg>
            <div class="stat" style="text-align:center">
              <div id="modelName" class="modelTitle">‚Äî</div>
              <div id="modelInfo" class="small muted mt8">‚Äî</div>
              <div class="small muted mt8">Monthly savings</div>
              <div id="saveMonth" class="bold tabnums mt4" style="font-size:22px">‚Äî</div>
              <div id="goodFit" class="good mt8" style="display:none">üëç Good fit</div>
            </div>
            <div id="aiPanel" class="mt8">
              <div id="aiVerdict" class="bold">AI analysis</div>
              <div id="aiReasons" class="small mt8"></div>
              <div id="aiAlt" class="small mt8"></div>
              <label class="small mt8" style="display:inline-flex;gap:6px;align-items:center"><input id="aiAddShare" type="checkbox" /> Add AI line to share card</label>
            </div>
            <button id="openShare" class="button primary mt12" style="width:100%">Share this scenario</button>
          </div>
        </div>
      </div>
    </div>
  </div>

    <!-- Compare modal -->
  <div id="compareOverlay" class="overlay" aria-hidden="true">
    <div class="modal compare-modal" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div class="muted small">Compare similar models</div>
        <div class="row" style="gap:8px;align-items:center">
          <label class="small muted" for="cmpEmiIn">EMI ‚Çπ/month</label>
          <input id="cmpEmiIn" class="input" type="number" style="width:140px" placeholder="12000" />
          <button id="cmpPrev" class="button" title="Prev">‚óÄ</button>
          <button id="cmpNext" class="button" title="Next">‚ñ∂</button>
          <button id="cmpClose" class="button big-x" aria-label="Close">‚úï</button>
        </div>
      </div>

      <div class="modal-body">
        <div class="cmpLayout">
          <!-- Left: baseline (your current selection) -->
          <div id="cmpBase" class="cmpCard baseline"></div>

          <!-- Right: swipeable carousel of peers -->
          <div class="cmpViewport" id="cmpViewport">
            <div id="cmpTrack" class="cmpTrack"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Share modal -->
  <div id="shareOverlay" class="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div class="muted small" id="shareTitle">Share ‚Äî Mobile portrait (1080√ó1920)</div>
        <div class="row">
          <button id="dlPng" class="button primary">Download PNG</button>
          <button id="openNew" class="button">Open in new tab</button>
          <button id="copyB64" class="button">Copy Base64</button>
          <button id="shareClose" class="button big-x">‚úï</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="stat" style="margin:auto;max-width:720px">
          <canvas id="shareCanvas" width="1080" height="1920" class="ring" style="border-radius:12px;max-width:100%;display:block;margin:0 auto"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Tools modal (EMI + Litres) -->
  <div id="toolsOverlay" class="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div class="muted small">EMI & Litres Saved</div>
        <div class="row">
          <button id="toolsInfo" class="button">Info</button>
          <button id="shareEmi" class="button">Share EMI card</button>
          <button id="toolsClose" class="button big-x">‚úï</button>
        </div>
      </div>
      <div class="modal-body">
        <div class="toolsGrid">
          <div class="toolTile emi">
            <h3>EMI helper</h3>
            <div class="row mt8" style="align-items:center">
              <svg class="gauge" viewBox="0 0 120 120" style="margin-right:8px">
                <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,.55)" stroke-width="12"/>
                <g transform="rotate(-90 60 60)">
                  <circle id="emiProg" cx="60" cy="60" r="50" fill="none" stroke="#ffffff" stroke-width="12" stroke-linecap="round" stroke-dasharray="0 314"/>
                </g>
                <text id="emiLabel" x="60" y="56" text-anchor="middle" fill="#fff" font-size="20" font-weight="800">‚Äî</text>
                <text x="60" y="78" text-anchor="middle" fill="rgba(255,255,255,.95)" font-size="12">EMI coverage</text>
              </svg>
              <div style="flex:1"></div>
            </div>
            <div class="row mt8">
              <div style="flex:1">
                <div class="small">Loan amount (‚Çπ)</div>
                <input id="emiAmount" class="input mt8" type="number" placeholder="500000" />
              </div>
              <div style="width:140px">
                <div class="small">Interest %</div>
                <input id="emiRate" class="input mt8" type="number" step="0.1" placeholder="9.5" />
              </div>
              <div style="width:160px">
                <div class="small">Months</div>
                <input id="emiMonths" class="input mt8" type="number" placeholder="60" />
              </div>
            </div>
            <div class="row mt16">
              <div>
                <div class="small">EMI / month</div>
                <div id="emiOut" class="value tabnums">‚Äî</div>
              </div>
              <div>
                <div class="small">Fuel savings / month</div>
                <div id="savingsOut" class="value tabnums">‚Äî</div>
              </div>
            </div>
            <div id="emiTip" class="small mt12" style="opacity:.9">Enter values to compare your EMI vs monthly fuel savings.</div>
          </div>

          <div class="toolTile litres">
            <h3>Litres saved / month</h3>
            <div class="row mt8">
              <div>
                <div class="small">Your monthly km</div>
                <div id="lsKm" class="value tabnums">‚Äî</div>
              </div>
              <div>
                <div class="small">Segment km/L</div>
                <div id="lsKmpl" class="value tabnums">‚Äî</div>
              </div>
            </div>
            <div class="mt16">
              <div class="small">Estimated petrol you avoid each month</div>
              <div id="lsLitres" class="value tabnums" style="font-size:32px">‚Äî</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Info modal -->
  <div id="infoOverlay" class="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div class="muted small" id="infoTitle">Info</div>
        <div class="row"><button id="infoClose" class="button big-x">‚úï</button></div>
      </div>
      <div class="modal-body">
        <div id="infoContent" class="stat" style="max-width:820px;margin:auto;font-size:16px"></div>
      </div>
    </div>
  </div>

  <script src="assets/data.js" defer></script>
  <script src="assets/app.js" defer></script>
</body>
</html>
